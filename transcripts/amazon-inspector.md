# Automating security checks with Amazon Inspector - Transcript

DAWN: Good evening, everyone.  I hope that you're all keeping well in these trying times. I'm here tonight to tell you- a story. It is a story about a production incident, it is a story about how we debugged it, and it is a story about how we resolved it.  Ah, during the story, I, live, we'll be answering questions- through the Slack channel and the YouTube comments, so if you do have any questions throughout the presentation, feel free to just type them in, and I will respond to them as we go.

So, first of all, I should probably tell you a little bit about who I am. My name is Dawn.  I am an associate DevOps/SRE at MYOB - I have worn both hats - and I am something of an auth- automation enthusiast.  The, sort of, phrase that I like to use to describe this is: why fix it twice when you can automate it once?  If you have a production issue, I don't want to see that being something where you have runbooks and you- deal with it every time it occurs.  I want people to automate solutions, and I like to see things to be fixed permanently.  Outside of work, I am an occasional author and kitchen alchemist; sometimes that ends really well, sometimes it doesn't.  I am also a raging sportsball fan, which is why that picture of me is me at Marvel Stadium.

So - the story that I'm going to tell you tonight starts with a warning. And this warning came not from someone that I was employed with, but from a friend of mine who is fairly well connected to the- security landscape in- IT, and particularly in terms of Microsoft products.  They basically warned me that- there was a zero-day vulnerability that was about to come out from Microsoft, and told me that, when I went into work the next day, I should make sure- that we patched all of our instances.  So, I- filed that information away, get into work the next day, and sure enough, as soon as I arrive into work, it is announced that there has been a zero-day vulnerability from Microsoft, and- part of the zero-day vulnerability that was disclosed is a vulnerability that targeted the Remote Desktop Protocol, which allows you to remote into machines that are hosted somewhere else from your local computer.  That- vulnerability allowed arbitrary code execution, and I'm fairly sure that everyone here will have some understanding of why that could potentially be an issue.  So, my colleagues and I, with the warning in mind, sat down.  We looked at what we were working with, tried to get our head around it, and then we got to work.

Effectively, the problem that we were dealing with, without wanting to give away too much about our production infrastructure, was that we had workloads running on Amazon EC2 instances which were accessible via remote desktop protocol, and - in some cases, when you have, ah, workloads that are accessible through EC2, they are effectively accessible to the whole internet.  Now, the way that you lock that down is by using security rules on your, ah, VPCs and security rules on your security groups, which will lock that access down to- a subset of IP addresses.  Usually ,you'd be looking at a corporate VPN.  The problem with that is that if you mess that up, then- those instances can potentially be open to- the entire Internet.  As many people in this industry have found out at various points, to their detriment.

So, in order to actually resolve this issue, what we basically needed to know was not, how are we going to take these instances down and immediately patch them?  It was more, could someone have exploited the vulnerability already, have we got configurations that are potentially open to the Internet, and how much time do we have to patch our instances?  And are there any quick fixes that we can come up with, that will actually buy ourselves some time to plan out our patching strategy, work out what we want to do, and not have to just take instances down in the middle of the day, which is what we would potentially have had to do if we were responding to this reactively.

Enter Amazon Inspector.  Effectively, Amazon Inspector is- a tool that you can use to check the security of EC2 instances.  So- at its simplest, it will scan for- network-related issues, like, do you have any ports that are open to the Internet, do you have methods of access that should be locked down?  And in its more complex form, it can actually look at are you running software that doesn't meet security best practices, you know, are you running software that has known vulnerabilities in it?  And it's something that can be used both proactively and reactively, so you can automate it, you can integrate it into your build pipelines - we'll get to that later - but in this case, we wanted to use it reactively, so- we basically wanted to just run a quick check, see whether there were any security issues that we could solve quickly, which would then buy us time to- sit down and plan out how we were going to take the instances offline.

[Back to main talks repo](https://github.com/lisushka/talks)
