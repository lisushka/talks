# Obscure Security on Kubernetes - Transcript

Hello everyone!  Ah, it's been a while since I've been here, erm, and - I do appreciate that Rob has said that I need no introduction.  I have indeed been working more on security lately, and so today, I would like to take you through 'Obscure Security on Kubernetes'.  Do you have no idea what that means?  Cool!  Because I also had absolutely no idea what that meant, until I started delving into the wold of Kubernetes security.  So let me take you through it.

First of all, I would like to acknowledge the Wurundjeri people of the Kulin Nation, on whose land I am presenting today.  This is, and always will be, Aboriginal land.  Their sovereignty was never ceded.

Er - so I'm not going to take Rob at his word, in saying that I need no introduction.  For those of you who don't know me, my name is Dawn, and - I do a bit of everything, but at the moment, it's chiefly DevOps and cloud security that I am working on.  Just to illustrate the level of paranoia that's required to do a lot of this security work, I was not actually in the Facebook data breach that happened earlier this year, because I have never had a Facebook account.  Because as far as I'm concerned, they are a minefield of security problems.  Outside of work, I am an occasional author and kitchen alchemist.  I am also a raging sportsball fan; to that end, I have updated my speaker picture, so now, rather than being at Marvel Stadium, I'm wearing a hockey sweater instead.

So, you're setting up a Kubernetes cluster, and you want to know what you need to know about Kubernetes security.  And probably, if you are doing that, you are going to take yourselves off to the Internet and have a look at some articles about it.  What you'll find is a list of things, typically, that looks something like this.

Generally, the first cab off the rank will be external access restrictions.  Because when you set up your Kubernetes cluster out of the box, particularly if you're setting up a bare-metal cluster on your own hardware or on EC2 instances, a lot of things like the API server, and certain aspects of the- underlying structure will be open to the Internet by default.  And so, it will be suggested that the first thing you should probably do is turn that off.  Then, you have to look at, when you're actually getting to deploying workloads, how security works there.  So, when you're getting to deploying your first workloads, one of the very common recommendations that you will see is your pods all need security policies; and it's surprising how many people forget this, but - in your average enterprise, that's going to be something that everyone very much does.

Something that, ah, doesn't necessarily happen, though, is that - with Kubernetes out of the box, all of the pods on your system have some degree of interoperability, so they have some degree of being able to talk to each other.  If you want to restrict that, you'd need to set up a `NetworkPolicy`, which will shut down cross-pod communication.  Another very important thing is - in terms of the underlying structure of the Kubernetes cluster, your `etcd` drive has a lot of really important information on it, and that, by default, is not encrypted.  So, you don't really want people sniffing all of the secrets around your cluster, so you probably want to encrypt that, and you probably want some sort of monitoring in place, to make sure that nobody is making changes to it.

In terms of secrets management, er, obviously you don't want to be storing your secrets in Github or storing them directly in whatever you're using to deploy workloads, so the recommendation then will be that you set up some sort of secrets management.  Ah, you've got HashiCorp Vault, which is one that is very easy to install on a Kubernetes cluster and is open-source.  Alternatively, if you're in the AWS ecosystem, you can use the AWS Key Management Service as an alternative, and that will allow you to encrypt - any secrets that you might need, but also things like certificates that you would use for mutual TLS traffic.  In terms of authentication and authorisation, there's really only one thing to say here, which is that you need some form of role-based access control - you don't want to be giving everyone an admin token to your cluster, and you don't want everyone to have exactly the same permissions, and you don't want to be manually assigning permissions per user.  Fortunately, though, if you are using EKS, because EKS is backed by IAM roles, to some degree that role-based access control is built-in.

'But Dawn,' you say to me, 'this is a level 300 talk, so I already know a lot of these basic security things about Kubernetes.  Why are you telling me all of this?'  Well - because there are a few common gotchas, and some of these common gotchas actually lead us to talking about the topic at hand.

The obvious one, which is a bane in the life of any security person is, what happens when someone actually leaves your organisation?

