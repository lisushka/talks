# Build from the Ground Up with AWS Control Tower

ROB: Thanks, guys.  So, up first tonight, we have Dawn.  Erm, Dawn has recorded us another presentation again - erm, she's [sic] a regular contributor now to the Melbourne AWS User Group, we're really thankful for the effort that she puts into these presentations.  Ah, so without further ado, we'll throw over to the great introduction, I hope, to Control Tower.  I'm looking forward to this one.

DAWN: Good evening!  As always, it is a pleasure to be here tonight at the AWS User Group to give this talk on one of AWS' new services; Control Tower, which will allow you to build your AWS organizations and security framework from the ground up.

I would like to begin tonight by acknowledging the Wurundjeri people of the Kulin nation on whose land I'm recording.  This is and always will be Aboriginal land, their sovereignty was never ceded, and I would like to pay my respects to their elders, past present and emerging.

Some of you probably have met me, some of you may not have done; if you haven't met me, you would want to know: who am I?  My name is Dawn E. Collett, I am an associate DevOps/SRE at MYOB - I have worn both hats.  And my aim, when I start work on Monday, is to improve the systems that I work on by close of business Friday.  It doesn't always happen, but I try.  Outside work, I am an occasional author and kitchen alchemist - sometimes that goes well, sometimes it doesn't.  I am also a raging sportsball fan, which is why that picture of me is me at Marvel Stadium.

So, in order to- actually dissect how AWS Control Tower works, we're going to look at a hypothetical use case.  I would like you to meet ProductCorp.  ProductCorp is a hypothetical product company startup, with a head office in Sydney; they were founded about five years ago, and they offer two products. The first one is a managed inventory platform software as a service called BuyIt; the second one is a managed online shopping platform called SellIt.  And most importantly for their talk, all of their infrastructure runs on AWS.

This is Ben Nguyen.  They're ProductCorp's lead cloud engineer.  They've got ten years of experience, mostly working for startups, and- part of the reason that they took this job at ProductCorp is because - a lot of the infrastructure at ProductCorp is immature and somewhat outdated, and they're very passionate about being able to get in and improve infrastructure.

So, when Ben arrived at ProductCorp, what they found was a bit of a mess.  ProductCorp had just two AWS accounts in one organisation; they had one account for all their dev services and one account for all their prod services, and- I'm guessing most of you probably know why that's a bad idea.  If you don't - roughly, look up the principle of least privilege; basically, the idea is you don't want multiple services running in the same account if you can avoid it, because you want people to have access to- the minimum possible number of things.  That means if you get hacked, then - attackers potentially only get access to one product's data as compared to two product's data.  And they do currently have some basic detective guardrails set up using service control policies, but their guardrails are not very mature.

As far as actual account access, they manage all of their access using IAM users, which is- not great for an organisation of that size, but we'll come back to that.  What's worse is that they don't require 2FA, so that means that as long as you get the username and password on those IAM users, you can go in and do whatever you want.  The security guardrails that they do have are - fairly immature and are mostly restriction based, and, very importantly for this, they don't use proactive security services like GuardDuty.  Now, GuardDuty is not directly related to - the, sort of content of this talk, but it comes back to a theme that we'll talk about a bit later.

So, Ben sits down, and they produce a plan for what they think that ProductCorp's AWS services could look like.  They - obviously have a great concern about security, and they think that the actual organisations can be structured better.  So they build this plan and they take it to Annie Jones, who's ProductCorp's CFO. She- originally worked for an auditing firm, and as the CFO, her primary focus is value for money.  The CTO has signed off on this plan, but she doesn't really know a lot about security, so- she doesn't understand the value in it.  Basically, the way that Ben sells it to her is by explaining that it's going to be a lot cheaper for them to sort out security now than it is if they potentially get hacked down the line, where they could open themselves up to - fines and reputational damage.

So Annie, upon hearing that, hires Marie Novotna to be ProductCorp's new security function.  She came from a consulting organisation that tended to work a lot with bleeding-edge AWS services, and was very much at the forefront of using new AWS services to improve security and governance practices.  She also holds multiple AWS security certifications.  So, Ben and Marie sit down together, and they form a plan for - the first phase of how they think they can improve ProductCorp's systems.

Rather than just having one OU, they're going to have four.  They're going to have a production OU, a pre-prod OU, a dev OU, and a lab OU, and restrictions on those will all be set up differently.  There's going to be an individual prod or pre-prod account for each of ProductCorp's services, which will eventually be migrated, as the development teams complete migration from the monolith application, to one AWS account per microservice.  And all the AWS accounts will talk to each other.  There will be individual dev accounts for each microservice that the teams are currently working on, and one lab account per team to allow them to spike out things that they might want to try.

Now, while Marie was working as a consultant, she worked a bit with AWS Control Tower, which is a service that was recently released to general availability, and very recently - like earlier this year - enabled in Sydney.  What Ben and Marie plan to do is to manage their entire AWS organisation using control tower, which will allow them to provision new accounts using Account Factory to ensure that guardrails are applied. It will allow them to- or, Control Tower will enforce those guardrails on OUs for them so that they don't have to do it themselves by setting up SCPs.  And they're also going to take advantage of Control Tower's strong recommendation to set up single sign-on, and move away from IAM users to use AWS SSO.
